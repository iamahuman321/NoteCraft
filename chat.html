<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <title>Family Chat - Mobile</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="header-content">
            <div class="header-left">
                <button class="back-btn hidden" id="backBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="chat-info">
                    <h1 class="header-title" id="headerTitle">Messages</h1>
                    <span class="chat-status" id="chatStatus"></span>
                </div>
            </div>
            <div class="header-right">
                <button class="header-action-btn" id="headerActionBtn">
                    <i class="fas fa-ellipsis-h"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Chat List Page -->
        <div class="page active" id="chatListPage">
            <div class="chat-list-container">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search..." />
                </div>
                
                <!-- Currently Active Section -->
                <div class="section-header">
                    <span class="section-badge">Currently Active</span>
                </div>
                
                <div class="active-users-grid" id="activeUsersGrid">
                    <!-- Active users will be loaded here -->
                </div>
                
                <!-- Recent Chats Section -->
                <div class="section-header">
                    <span class="section-badge">Recents</span>
                    <span class="notification-count">3</span>
                </div>
                
                <div class="chat-list" id="chatList">
                    <!-- Chat items will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Individual Chat Page -->
        <div class="page" id="chatPage">
            <!-- Date Header -->
            <div class="date-header">
                <span>Today</span>
            </div>
            
            <div class="messages-container" id="messagesContainer">
                <div class="messages-list" id="messagesList">
                    <!-- Sample messages like in reference -->
                    <div class="message received">
                        <div class="message-content">
                            <div class="message-text">Hey, what's up?</div>
                        </div>
                    </div>
                    
                    <div class="message sent">
                        <div class="message-content">
                            <div class="message-text">Not much, just hanging out at home. How about you?</div>
                        </div>
                    </div>
                    
                    <div class="message received">
                        <div class="message-content">
                            <div class="message-text">Same here. I've been trying to stay busy by working on some art projects.</div>
                        </div>
                    </div>
                    
                    <div class="message sent">
                        <div class="message-content">
                            <div class="message-text">That sounds cool. What kind of art are you into?</div>
                        </div>
                    </div>
                    
                    <div class="message received">
                        <div class="message-content">
                            <div class="message-text">I like to do a lot of different things, but right now I'm really into painting. I've been working on a series of abstract landscapes.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="message-input-container">
                <div class="message-input-wrapper">
                    <button class="attach-btn" id="attachBtn">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <input type="file" id="imageInput" accept="image/*" style="display: none;" />
                    <div class="input-wrapper">
                        <textarea 
                            class="message-input" 
                            id="messageInput" 
                            placeholder="Type your message"
                            rows="1"></textarea>
                    </div>
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settingsPage">
            <div class="settings-container">
                <div class="settings-header">
                    <h2>Settings</h2>
                </div>
                
                <div class="settings-list">
                    <div class="setting-item">
                        <div class="setting-info">
                            <i class="fas fa-user-circle"></i>
                            <div>
                                <h3>Profile</h3>
                                <p id="userProfileText">Update your profile information</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <i class="fas fa-bell"></i>
                            <div>
                                <h3>Notifications</h3>
                                <p>Message alerts and sounds</p>
                            </div>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="notificationSound" checked>
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <i class="fas fa-palette"></i>
                            <div>
                                <h3>Theme</h3>
                                <p>Dark or light appearance</p>
                            </div>
                        </div>
                        <select id="themeSelect" class="theme-select">
                            <option value="dark">Dark</option>
                            <option value="light">Light</option>
                        </select>
                    </div>

                    <div class="setting-item" id="signOutItem" style="display: none;">
                        <div class="setting-info">
                            <i class="fas fa-sign-out-alt"></i>
                            <div>
                                <h3>Sign Out</h3>
                                <p>Sign out of your account</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div class="modal" id="voiceRecordingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Voice Message</h3>
                <button class="modal-close" onclick="hideVoiceModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="voice-recorder">
                    <div class="voice-visualizer" id="voiceVisualizer">
                        <div class="voice-circle"></div>
                    </div>
                    <div class="voice-status" id="voiceStatus">Ready to record</div>
                    <div class="voice-duration" id="voiceDuration">00:00</div>
                    <div class="voice-controls">
                        <button class="btn-voice record" id="voiceRecordBtn" onclick="startVoiceRecording()">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="btn-voice stop hidden" id="voiceStopBtn" onclick="stopVoiceRecording()">
                            <i class="fas fa-stop"></i>
                        </button>
                        <button class="btn-voice play hidden" id="voicePlayBtn" onclick="playVoiceRecording()">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="btn-voice send hidden" id="voiceSendBtn" onclick="sendVoiceMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span id="toastMessage"></span>
    </div>

    <!-- Scripts -->
    <script src="firebase-config.js?v=3"></script>
    <script src="script.js?v=3"></script>
</body>
</html>