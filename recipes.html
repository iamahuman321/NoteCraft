<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Recipes - Notes App</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="recipes-page">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <button class="menu-button" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <h1 class="app-title">Family Recipes</h1>
            <div class="header-actions">
                <button class="new-recipe-btn" onclick="createNewRecipe()">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-content">
            <div class="user-section">
                <div class="user-info" id="userInfo">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name" id="userName">Guest User</div>
                        <div class="user-email" id="userEmail">Continue as guest</div>
                    </div>
                </div>
            </div>
            
            <div class="nav-menu">
                <a href="index.html" class="nav-item">
                    <i class="fas fa-sticky-note"></i>
                    <span>Notes</span>
                </a>
                <a href="category.html" class="nav-item">
                    <i class="fas fa-tags"></i>
                    <span>Categories</span>
                </a>
                <a href="recipes.html" class="nav-item active">
                    <i class="fas fa-utensils"></i>
                    <span>Recipes</span>
                </a>
                <a href="share.html" class="nav-item">
                    <i class="fas fa-share-alt"></i>
                    <span>Shared</span>
                </a>
                <div class="nav-item" onclick="showShoppingPage()">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Shopping Lists</span>
                </div>
            </div>

            <div class="auth-section">
                <div class="auth-buttons" id="authButtons">
                    <button class="auth-btn" onclick="window.location.href='login.html'">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Sign In</span>
                    </button>
                    <button class="auth-btn" onclick="window.location.href='signup.html'">
                        <i class="fas fa-user-plus"></i>
                        <span>Sign Up</span>
                    </button>
                </div>
                <div class="signed-in-options" id="signedInOptions" style="display: none;">
                    <button class="auth-btn" onclick="window.authFunctions?.signOutUser()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Sign Out</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page-container">
            <!-- Recipes List View -->
            <div class="recipes-view" id="recipesView">
                <div class="search-bar">
                    <div class="search-input-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="recipeSearchInput" placeholder="Search recipes..." onkeyup="handleRecipeSearch()">
                        <button class="clear-search" id="clearRecipeSearch" onclick="clearRecipeSearch()" style="display: none;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <div class="recipes-grid" id="recipesGrid">
                    <!-- Recipe cards will be rendered here -->
                </div>

                <div class="no-recipes" id="noRecipes" style="display: none;">
                    <div class="empty-state">
                        <i class="fas fa-utensils"></i>
                        <h3>No recipes yet</h3>
                        <p>Create your first family recipe!</p>
                        <button class="primary-btn" onclick="createNewRecipe()">
                            <i class="fas fa-plus"></i>
                            Add Recipe
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recipe Editor View -->
            <div class="recipe-editor" id="recipeEditor" style="display: none;">
                <div class="editor-header">
                    <button class="back-btn" onclick="showRecipesView()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="editor-actions">
                        <button class="save-btn" onclick="saveCurrentRecipe()">
                            <i class="fas fa-save"></i>
                            Save
                        </button>
                        <button class="delete-btn" onclick="deleteCurrentRecipe()" id="deleteRecipeBtn" style="display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>

                <div class="recipe-form">
                    <div class="form-group">
                        <input type="text" id="recipeTitleInput" placeholder="Recipe Title" class="form-input">
                    </div>

                    <div class="form-group">
                        <textarea id="recipeDescriptionInput" placeholder="Recipe Description" class="form-textarea" rows="3"></textarea>
                    </div>

                    <!-- Ingredients Section -->
                    <div class="recipe-section">
                        <h3 class="section-title">
                            <i class="fas fa-list"></i>
                            Ingredients
                        </h3>
                        <div class="ingredients-list" id="ingredientsList">
                            <!-- Ingredients will be rendered here -->
                        </div>
                        <button class="add-item-btn" onclick="addIngredient()">
                            <i class="fas fa-plus"></i>
                            Add Ingredient
                        </button>
                    </div>

                    <!-- Method Section -->
                    <div class="recipe-section">
                        <h3 class="section-title">
                            <i class="fas fa-clipboard-list"></i>
                            Method
                        </h3>
                        <div class="method-steps" id="methodSteps">
                            <!-- Method steps will be rendered here -->
                        </div>
                        <button class="add-item-btn" onclick="addMethodStep()">
                            <i class="fas fa-plus"></i>
                            Add Step
                        </button>
                    </div>

                    <!-- Media Section -->
                    <div class="recipe-section">
                        <h3 class="section-title">
                            <i class="fas fa-camera"></i>
                            Photos & Videos
                        </h3>
                        <div class="media-upload">
                            <input type="file" id="recipeMediaInput" accept="image/*,video/*" multiple style="display: none;" onchange="handleMediaUpload(event)">
                            <button class="upload-btn" onclick="document.getElementById('recipeMediaInput').click()">
                                <i class="fas fa-upload"></i>
                                Add Photos/Videos
                            </button>
                        </div>
                        <div class="media-gallery" id="mediaGallery">
                            <!-- Media items will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteRecipeModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>Delete Recipe</h3>
                <button class="close-btn" onclick="hideDeleteRecipeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this recipe? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="secondary-btn" onclick="hideDeleteRecipeModal()">Cancel</button>
                <button class="danger-btn" onclick="confirmDeleteRecipe()">Delete</button>
            </div>
        </div>
    </div>

    <!-- Media Viewer Modal -->
    <div class="modal-overlay" id="mediaViewerModal" style="display: none;">
        <div class="media-viewer">
            <button class="close-btn" onclick="closeMediaViewer()">
                <i class="fas fa-times"></i>
            </button>
            <div class="media-content" id="mediaContent">
                <!-- Media content will be shown here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Scripts -->
    <script src="firebase-config.js"></script>
    <script src="recipes.js"></script>
</body>
</html>